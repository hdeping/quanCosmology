# 初识git

​	这篇文章曾经写在实验室论坛，如我所料，没引起什么重视。但我认为，git的重要性是超出IT界的。有必要的话，任何一个用计算机工作的人都应该学一学。无论你是用计算机来写文字，绘画，做ppt，或者是别的事情，版本管理都是必要的。git，是用于版本管理的极好工具。



## git的现状    

​	在世界范围内，众多IT技术公司已经广泛使用git进行代码和文档的管理。作为一种代码版本管理的工具，事实上git的使用范畴已经不局限于代码版本管理。github（基于git的代码托管平台）上已经有大量开源文档的项目，还有诸如gitbook这种管理书籍的工具。git已经逐渐演变为一种项目管理的工具。



​	相对于工业界已经开始广泛使用，学术界的使用并没有那么普及。当然这里并没有做过详细的调查， 仅凭借个人有限的观察。在我们实验室，代码管理十分粗放。具体表现为代码风格因人而异，代码注释全看心情；代码版本依靠文件夹手动管理，代码的使用依靠口口相传；每个人的代码相互隔离，互相之间看不到； 学生毕业之后，代码也是人走茶凉。



​	代码是一方面，事实上文章也是可以使用git进行管理的， 无论是lyx还是tex都是纯文本文件。总的来说，git是为了解决以下几个常见的痛点：  

a.) 代码或文档版本太多，难以管理 ；

b.) 代码或者文档误删除，没有及时保存 ；

c.) 代码修改历史难以追溯；

d.) 多个人共同完成一个代码或者文档，每个人的工作需要手动整理合并。

​	代码是有生命周期的，诸多代码在写成的那一刻已经宣告死亡，没有足够注释，没有充分说明的文档， 还没有没有修改历史，这样的代码过几个月连作者都看不懂。



​	git解决了修改历史的保存问题，让代码可以 被追溯。每一次代码版本的提交都需要有一段文字描述，这本身就是个注释，对于延长代码的生命周期 是有好处的。通过git中的一些命令，我们还可以根据需求创建分支。在分支中添加新代码，新函数，开发完成后合并到主分支（master）当中。在主分支中，可以清楚地看到整个代码的演化历史。   



​	决定开始使用git才是最困难的。这意味着改变自己的习惯，修改代码或者文档之后的第一件事情是，提交修改。具体的操作方法网络上有各种教程。git的详细使用方法可以参考廖雪峰的网站：  https://www.liaoxuefeng.com/wiki/896043488029600。关于git完整的说明可以查看git官方网站上的教程： https://git-scm.com/doc

## Why Git

  	Git是分布式的，比svn那样的中心化管理的工具更方便使用，代码的保存也更加安全。
同样，由于git的分布式特性，git是多人协同开发的不二之选。以IT人的情怀项目Linux内核为例，
目前的5.4版本，从05年至今，一共有了超过87万次提交，提交代码的人数超过2.7万人，这么大
的项目没有像git这样的工具在做支撑是不可能推进得这么快的。深度学习领域也是，文章在arxiv上
发表，代码在github上发布，还有像pytorch、tensorflow这样的框架通过git、github这样的工具和平台，
快速地往前演进。



   	git有这么多好处，但是可能有人会说，这跟我有什么关系？我又不跟别人协作，我自己一个人写代码，
一个人调bug，修改历史对我来说没有意义。事实上真的是这样吗？万一改错了，我想退到之前的版本怎么
办？重写呀，或者我用很多文件夹的方式管理代码？万一本地硬盘坏了，或者代码误删了怎么办？重写呀！
年轻的岁月就被耗在了这里。事实上，哪怕就一个人也是需要合作的。首先，尽量复用代码是提升效率的有效
方式，这就要求需要花几个月或者几年时间维护同一段代码，这本质上是现在的自己和未来的自己的协作。
有点玄学，但是事实如此。从一个侧面上可以看出这种合理性。代码，尤其是c、c++的代码，如果没有充分
的注释和文档，过三个月连自己都看不懂。这跟别人的代码有何分别。其次，我们很可能会在不同的电脑上
维护同一段代码。我们想在自己的笔记本电脑和台式机，甚至远程服务器上同时维护自己的代码。这个时候
，有git这样的工具将会非常方便。



## How Git

  git的使用教程有非常多，推荐看看progit这本书（https://git-scm.com/book/zh/v2/，内含多种语言的版本，包括中文）。关于git的一个概括性介绍，可以归纳为三个数字，456，也就是，4个区域，5个状态以及6个步骤。



### 4个区域

work, stage , local repository, remote repository
work 工作区
stage 暂存区
local repository 本地仓库区
remote repository 远程仓库区



### 5个状态

Untracked, unmodified, modified, staged, commited
Untracked 未追踪，表示文件未被git记录
unmodified 未修改
modified  已更改
staged 已暂存 更改记录放到暂存区
commited 已提交，更改记录提交到仓库中



### 6个步骤 

Git clone/init —> status —> add /commit —> log/shortlog/reflog —> push/pull —> branch /checkout/merge
git clone/init  克隆远程仓库或者初始化一个新的git目录
git status  查看文件状态
git add/commit  添加更改和提交记录
git log/shortlog/reflog  查看记录
git push/pull  推送和拉取远程仓库
git branch/checkout/merge 用于分支的创建、切换和合并



## 后记

​	git是一个多人协作的工作（虽然一个人用也是可以的），如果可以在实验室推广开，就目前所知可以做以下几个事情：



1. 形成实验室的代码库   

   ​	有了git，这个事 不一定能成，但是会方便很多。这个事应该分成几步走，先是用git 管理代码，然后对需要重用的代码进行评审、测试和编写文档，形成 libncl_particle.so、libncl_reaction_diffusion.so之类的库，供实验室所有人使用。 

2.  形成实验室的文献库   

   ​	所有人可以共同维护同一个bib，或者几个bib，必要的话可以管理文献（文件管理可以有其他方式，比如ftp）

3.  形成实验室的成果库   

   ​	所有人的文章都放在一个个仓库下，这些都带有历史记录信息， 我们可以清楚地看到文章是怎么一点点写出来的。这对于作者自 己写文章有好处，可以知道自己每次的修改；对于新人学习写文 章更是有好处，可以看到文章从无到有的全过程，而不仅仅是看到最 后的成品。同理，ppt也可以git管理，历史记录信息是最好的学习材料。  事实上，git的使用并不算简单，最难的地方在于转变思路，工具的使用可以熟能生巧。